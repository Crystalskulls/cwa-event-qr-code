#!/usr/bin/env node
/* eslint-disable no-unused-expressions */

const yargs = require('yargs')
const middlewares = require('../lib/yargs/middlewares/index')

const dataProviderMiddleware = middlewares.dataProvider({
  sources: [
    middlewares.dataFromCSV(),
    middlewares.dataFromArgv()
  ]
})

yargs
  .middleware([
    dataProviderMiddleware
  ])
  .command(require('../lib/yargs/commands/file')({ dataProvider: dataProviderMiddleware }))
  .command(require('../lib/yargs/commands/poster')({ dataProvider: dataProviderMiddleware }))
  .command(require('../lib/yargs/commands/terminal')({ dataProvider: dataProviderMiddleware }))
  .showHelpOnFail(true)
  .argv
